version: "3.9"

networks:
  pericope_net:
    name: pericope_net

services:
  pericopeai-api:
    build:
      context: /root/workspace/AugustineService   # backend repo path
      dockerfile: Dockerfile                  # update if named differently
    env_file:
      - /root/workspace/AugustineService/.env      # ensure this exists and is sanitized
    ports:
      - "18000:8000"                          # host:container
    networks:
      - pericope_net
    restart: unless-stopped

  pericopeai-frontend:
    build:
      context: /root/workspace/AugustineFE        # frontend repo path
      dockerfile: Dockerfile                  # update if named differently
    ports:
      - "13080:80"                            # host:container
    networks:
      - pericope_net
    restart: unless-stopped

# Notes:
# - Update the build contexts and dockerfile names to match your cloned repos.
# - Ensure env files exist and contain rotated/safe values.
# - Host ports 18000/13080 are chosen to avoid conflicts; update Nginx upstreams to point there after containers are healthy.
